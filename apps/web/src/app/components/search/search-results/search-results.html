<div class="search-results-container">
  <!-- Loading State -->
  <div class="loading-container" *ngIf="isLoading && results.length === 0">
    <div class="loading-animation">
      <div class="pulse-dots">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>
    </div>
    <p class="loading-text">Searching for answers...</p>
    <p class="loading-subtext">This may take a few seconds</p>
  </div>

  <!-- Skeleton Loading for Results -->
  <div class="skeleton-container" *ngIf="isLoading && results.length === 0">
    <div class="skeleton-item" *ngFor="let item of [1, 2, 3]">
      <div class="skeleton-header">
        <div class="skeleton-model"></div>
        <div class="skeleton-actions">
          <div class="skeleton-action"></div>
          <div class="skeleton-action"></div>
        </div>
      </div>
      <div class="skeleton-content">
        <div class="skeleton-line"></div>
        <div class="skeleton-line"></div>
        <div class="skeleton-line short"></div>
      </div>
      <div class="skeleton-references">
        <div class="skeleton-reference" *ngFor="let ref of [1, 2]">
          <div class="skeleton-ref-title"></div>
          <div class="skeleton-ref-url"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Results -->
  <div class="results-list" *ngIf="!isLoading && results.length > 0">
    <div 
      class="result-item" 
      *ngFor="let result of results; trackBy: trackByResult; let i = index">
      <!-- Answer Section -->
      <div class="answer-section">
        <div class="answer-header">
          <div class="model-info">
            <span class="model-name">{{ result.modelUsed }}</span>
            <span class="confidence" *ngIf="result.confidence">
              {{ result.confidence }}% confident
            </span>
          </div>
          <div class="answer-actions">
            <button class="action-btn" (click)="onCopyAnswer(result)">
              <app-icon name="content-copy" [size]="16" color="#6b7280"></app-icon>
            </button>
            <button class="action-btn" (click)="onShareAnswer(result)">
              <app-icon name="share" [size]="16" color="#6b7280"></app-icon>
            </button>
          </div>
        </div>
        
        <div class="answer-content" [innerHTML]="result.answer"></div>
      </div>

      <!-- References Section -->
      <div class="references-section" *ngIf="result.references && result.references.length > 0">
        <h4 class="references-title">Sources</h4>
        <div class="references-list">
          <div 
            class="reference-item" 
            *ngFor="let reference of result.references; trackBy: trackByReference">
            <div class="reference-content">
              <div class="reference-title">{{ reference.title }}</div>
              <div class="reference-url">{{ reference.url }}</div>
              <div class="reference-snippet" *ngIf="reference.snippet">{{ reference.snippet }}</div>
            </div>
            <button class="reference-action" (click)="onReferenceClick(reference)">
              <app-icon name="open-in-new" [size]="16" color="#6b7280"></app-icon>
            </button>
          </div>
        </div>
      </div>

      <!-- Follow-up Questions -->
      <div class="follow-up-section" *ngIf="result.followUpQuestions && result.followUpQuestions.length > 0">
        <h4 class="follow-up-title">Related questions</h4>
        <div class="follow-up-list">
          <button 
            class="follow-up-question" 
            *ngFor="let question of result.followUpQuestions"
            (click)="onFollowUpClick(question)">
            {{ question }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- No Results -->
  <div class="no-results" *ngIf="!isLoading && results.length === 0">
    <div class="no-results-icon">
      <app-icon name="search" [size]="48" color="#9ca3af"></app-icon>
    </div>
    <h3 class="no-results-title">No results found</h3>
    <p class="no-results-text">Try adjusting your search terms or ask a different question.</p>
  </div>
</div>
